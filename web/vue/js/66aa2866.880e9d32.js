(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["66aa2866"],{"088f":function(t,e,a){},"285c":function(t,e,a){},"37c8":function(t,e,a){e.f=a("2b4c")},"3a72":function(t,e,a){var r=a("7726"),n=a("8378"),i=a("2d00"),s=a("37c8"),o=a("86cc").f;t.exports=function(t){var e=n.Symbol||(n.Symbol=i?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||o(e,t,{value:s.f(t)})}},"469d":function(t,e,a){"use strict";a("6762"),a("2fdb"),a("7514"),a("ac6a"),a("cadf");var r=a("2ef0"),n=a.n(r),i=a("c1df"),s=a.n(i),o=a("2b0e");e["a"]={computed:{gekkos:function(){return this.$store.state.gekkos.gekkos},stratrunners:function(){return n.a.values(this.$store.getters["gekkos/list"]).concat(n.a.values(this.$store.getters["gekkos/archive"])).filter(function(t){return"papertrader"===t.logType||"tradebot"===t.logType})},watchers:function(){return n.a.values(this.$store.getters["gekkos/list"]).concat(n.a.values(this.$store.getters["gekkos/archive"])).filter(function(t){return"watcher"===t.logType})},watchConfig:function(){var t=n.a.pick(this.config,"watch","candleWriter"),e=o["a"].util.extend({},t);return e.type="market watcher",e.mode="realtime",e},requiredHistoricalData:function(){if(this.config.tradingAdvisor&&this.config.valid){var t=this.config.tradingAdvisor;return t.candleSize*t.historySize}},gekkoConfig:function(){var t;if(this.existingMarketWatcher){if(this.requiredHistoricalData){var e=s()().utc().startOf("minute").subtract(this.requiredHistoricalData,"minutes").unix(),a=s.a.utc(this.existingMarketWatcher.events.initial.candle.start).unix();t=s.a.unix(Math.max(e,a)).utc().format()}else t=s()().utc().startOf("minute").format();var r=o["a"].util.extend({market:{type:"leech",from:t},mode:"realtime"},this.config);return r}},existingMarketWatcher:function(){var t=o["a"].util.extend({},this.watchConfig.watch);return n.a.find(this.gekkos,{config:{watch:t}})},exchange:function(){return this.watchConfig.watch.exchange},existingTradebot:function(){var t=this;return n.a.find(this.gekkos,function(e){return"tradebot"===e.logType&&e.config.watch.exchange===t.exchange})},availableApiKeys:function(){return this.$store.state.config.apiKeys}},watch:{existingMarketWatcher:function(t,e){var a=this;if(this.pendingStratrunner){var r=this.existingMarketWatcher;r.events.latest.candle&&(this.pendingStratrunner=!1,this.startGekko().then(function(t){return a.routeToGekko(null,t.data)}).catch(function(t){return a.routeToGekko(t,resp.data)}))}}},methods:{updateConfig:function(t){this.config=t},start:function(){var t=this;if("tradebot"===this.config.type||this.config.type.label&&"tradebot"===this.config.type.label.toLowerCase()){if(this.existingTradebot){var e="You already have a tradebot running on this exchange";return e+=", you can only run one tradebot per exchange.",this.$q.dialog({title:"Bot already running",color:"warning",message:e})}if(!this.availableApiKeys.includes(this.exchange))return this.$q.dialog({title:"No API Keys found",color:"warning",message:"Please first configure API keys for this exchange in the config page."})}"market watcher"===this.config.type||this.config.type.label&&"market watcher"===this.config.type.label.toLowerCase()?this.existingMarketWatcher?(this.$q.dialog({title:"Market is already being watched",message:"This market is already being watched, redirecting you now..."}),this.$router.push({path:"/live-gekkos/".concat(this.existingMarketWatcher.id)})):this.startWatcher().then(function(e){t.$q.notify({type:"positive",message:"Watcher sucessfully started."}),t.$router.push({path:"/live-gekkos/".concat(e.data.id)})}).catch(function(e){t.$q.notify({type:"negative",message:"Error while starting market watcher."})}):this.existingMarketWatcher?this.startGekko().then(function(e){return t.routeToGekko(null,e.data)}).catch(function(e){return t.routeToGekko(e,resp.data)}):this.startWatcher().then(function(e){t.pendingStratrunner=e.data.id,t.$q.notify({type:"positive",message:"Watcher sucessfully started."})})},routeToGekko:function(t,e){if(t||e.error)return this.$q.notify({type:"negative",message:"Error while starting live gekko."}),console.error(t,e.error);this.$router.push({path:"/live-gekkos/".concat(e.id)})},startWatcher:function(){return this.$axios.post(this.$store.state.config.apiBaseUrl+"startGekko",this.watchConfig)},startGekko:function(){return this.$axios.post(this.$store.state.config.apiBaseUrl+"startGekko",this.gekkoConfig)}}}},"67ab":function(t,e,a){var r=a("ca5a")("meta"),n=a("d3f4"),i=a("69a8"),s=a("86cc").f,o=0,c=Object.isExtensible||function(){return!0},l=!a("79e5")(function(){return c(Object.preventExtensions({}))}),u=function(t){s(t,r,{value:{i:"O"+ ++o,w:{}}})},d=function(t,e){if(!n(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!i(t,r)){if(!c(t))return"F";if(!e)return"E";u(t)}return t[r].i},f=function(t,e){if(!i(t,r)){if(!c(t))return!0;if(!e)return!1;u(t)}return t[r].w},h=function(t){return l&&p.NEED&&c(t)&&!i(t,r)&&u(t),t},p=t.exports={KEY:r,NEED:!1,fastKey:d,getWeak:f,onFreeze:h}},"7bbc":function(t,e,a){var r=a("6821"),n=a("9093").f,i={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],o=function(t){try{return n(t)}catch(t){return s.slice()}};t.exports.f=function(t){return s&&"[object Window]"==i.call(t)?o(t):n(r(t))}},"8a81":function(t,e,a){"use strict";var r=a("7726"),n=a("69a8"),i=a("9e1e"),s=a("5ca1"),o=a("2aba"),c=a("67ab").KEY,l=a("79e5"),u=a("5537"),d=a("7f20"),f=a("ca5a"),h=a("2b4c"),p=a("37c8"),m=a("3a72"),g=a("d4c0"),v=a("1169"),b=a("cb7c"),y=a("d3f4"),w=a("6821"),x=a("6a99"),k=a("4630"),S=a("2aeb"),_=a("7bbc"),C=a("11e9"),P=a("86cc"),T=a("0d58"),E=C.f,R=P.f,q=_.f,$=r.Symbol,z=r.JSON,j=z&&z.stringify,D="prototype",A=h("_hidden"),O=h("toPrimitive"),F={}.propertyIsEnumerable,U=u("symbol-registry"),W=u("symbols"),B=u("op-symbols"),M=Object[D],Y="function"==typeof $,N=r.QObject,V=!N||!N[D]||!N[D].findChild,L=i&&l(function(){return 7!=S(R({},"a",{get:function(){return R(this,"a",{value:7}).a}})).a})?function(t,e,a){var r=E(M,e);r&&delete M[e],R(t,e,a),r&&t!==M&&R(M,e,r)}:R,G=function(t){var e=W[t]=S($[D]);return e._k=t,e},H=Y&&"symbol"==typeof $.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof $},I=function(t,e,a){return t===M&&I(B,e,a),b(t),e=x(e,!0),b(a),n(W,e)?(a.enumerable?(n(t,A)&&t[A][e]&&(t[A][e]=!1),a=S(a,{enumerable:k(0,!1)})):(n(t,A)||R(t,A,k(1,{})),t[A][e]=!0),L(t,e,a)):R(t,e,a)},J=function(t,e){b(t);var a,r=g(e=w(e)),n=0,i=r.length;while(i>n)I(t,a=r[n++],e[a]);return t},K=function(t,e){return void 0===e?S(t):J(S(t),e)},X=function(t){var e=F.call(this,t=x(t,!0));return!(this===M&&n(W,t)&&!n(B,t))&&(!(e||!n(this,t)||!n(W,t)||n(this,A)&&this[A][t])||e)},Q=function(t,e){if(t=w(t),e=x(e,!0),t!==M||!n(W,e)||n(B,e)){var a=E(t,e);return!a||!n(W,e)||n(t,A)&&t[A][e]||(a.enumerable=!0),a}},Z=function(t){var e,a=q(w(t)),r=[],i=0;while(a.length>i)n(W,e=a[i++])||e==A||e==c||r.push(e);return r},tt=function(t){var e,a=t===M,r=q(a?B:w(t)),i=[],s=0;while(r.length>s)!n(W,e=r[s++])||a&&!n(M,e)||i.push(W[e]);return i};Y||($=function(){if(this instanceof $)throw TypeError("Symbol is not a constructor!");var t=f(arguments.length>0?arguments[0]:void 0),e=function(a){this===M&&e.call(B,a),n(this,A)&&n(this[A],t)&&(this[A][t]=!1),L(this,t,k(1,a))};return i&&V&&L(M,t,{configurable:!0,set:e}),G(t)},o($[D],"toString",function(){return this._k}),C.f=Q,P.f=I,a("9093").f=_.f=Z,a("52a7").f=X,a("2621").f=tt,i&&!a("2d00")&&o(M,"propertyIsEnumerable",X,!0),p.f=function(t){return G(h(t))}),s(s.G+s.W+s.F*!Y,{Symbol:$});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),at=0;et.length>at;)h(et[at++]);for(var rt=T(h.store),nt=0;rt.length>nt;)m(rt[nt++]);s(s.S+s.F*!Y,"Symbol",{for:function(t){return n(U,t+="")?U[t]:U[t]=$(t)},keyFor:function(t){if(!H(t))throw TypeError(t+" is not a symbol!");for(var e in U)if(U[e]===t)return e},useSetter:function(){V=!0},useSimple:function(){V=!1}}),s(s.S+s.F*!Y,"Object",{create:K,defineProperty:I,defineProperties:J,getOwnPropertyDescriptor:Q,getOwnPropertyNames:Z,getOwnPropertySymbols:tt}),z&&s(s.S+s.F*(!Y||l(function(){var t=$();return"[null]"!=j([t])||"{}"!=j({a:t})||"{}"!=j(Object(t))})),"JSON",{stringify:function(t){var e,a,r=[t],n=1;while(arguments.length>n)r.push(arguments[n++]);if(a=e=r[1],(y(e)||void 0!==t)&&!H(t))return v(e)||(e=function(t,e){if("function"==typeof a&&(e=a.call(this,t,e)),!H(e))return e}),r[1]=e,j.apply(z,r)}}),$[D][O]||a("32e9")($[D],O,$[D].valueOf),d($,"Symbol"),d(Math,"Math",!0),d(r.JSON,"JSON",!0)},ac4d:function(t,e,a){a("3a72")("asyncIterator")},ae5a:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),a("div",{staticClass:"row gutter-md"},[a("div",{staticClass:"col"},[a("q-btn",{attrs:{color:"primary"},on:{click:function(e){return e.preventDefault(),t.switchToggle(e)}}},[t._v("Change paper trader settings")])],1),a("div",{staticClass:"col"},["open"===t.toggle?a("q-field",{staticClass:"q-mt-md",attrs:{label:"Settings",orientation:"vertical",error:!!t.rawPaperTraderParamsError,"error-label":t.rawPaperTraderParamsError.message,helper:"adjust you paper trader settings here..."}},[a("q-input",{attrs:{type:"textarea",rows:"8","max-height":80,inverted:!!t.rawPaperTraderParamsError},model:{value:t.rawPaperTraderParams,callback:function(e){t.rawPaperTraderParams=e},expression:"rawPaperTraderParams"}})],1):t._e()],1)])])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("h4",[t._v("Paper Trader")])])}];r._withStripped=!0;a("2ef0");var i={created:function(){var t=this;this.$axios.get(this.$store.state.config.apiBaseUrl+"configPart/paperTrader").then(function(e){t.rawPaperTraderParams=e.data.part}).catch(function(e){t.$q.notify({type:"negative",message:"Error getting Perfomance-Analyser config from server."})})},data:function(){return{rawPaperTraderParams:"",rawPaperTraderParamsError:!1,paperTraderParams:{},toggle:"closed"}},watch:{rawPaperTraderParams:function(){this.emitConfig()}},methods:{switchToggle:function(){"open"===this.toggle?this.toggle="closed":this.toggle="open"},emitConfig:function(){this.parseParams(),this.$emit("settings",this.paperTraderParams)},parseParams:function(){try{this.paperTraderParams=toml.parse(this.rawPaperTraderParams),this.paperTraderParams.reportRoundtrips=!0,this.rawPaperTraderParamsError=!1}catch(t){this.rawPaperTraderParamsError=t,this.paperTraderParams={}}}}},s=i,o=a("2877"),c=Object(o["a"])(s,r,n,!1,null,null,null);c.options.__file="papertrader.vue";e["a"]=c.exports},aeb1:function(t,e,a){var r,n,i;(function(a,s){n=[],r=s,i="function"===typeof r?r.apply(e,n):r,void 0===i||(t.exports=i)})(0,function(){return function t(e,a,r){var n,i,s=window,o="application/octet-stream",c=r||o,l=e,u=!a&&!r&&l,d=document.createElement("a"),f=function(t){return String(t)},h=s.Blob||s.MozBlob||s.WebKitBlob||f,p=a||"download";if(h=h.call?h.bind(s):Blob,"true"===String(this)&&(l=[l,c],c=l[0],l=l[1]),u&&u.length<2048&&(p=u.split("/").pop().split("?")[0],d.href=u,-1!==d.href.indexOf(u))){var m=new XMLHttpRequest;return m.open("GET",u,!0),m.responseType="blob",m.onload=function(e){t(e.target.response,p,o)},setTimeout(function(){m.send()},0),m}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(l)){if(!(l.length>2096103.424&&h!==f))return navigator.msSaveBlob?navigator.msSaveBlob(y(l),p):w(l);l=y(l),c=l.type||o}else if(/([\x80-\xff])/.test(l)){var g=0,v=new Uint8Array(l.length),b=v.length;for(g;g<b;++g)v[g]=l.charCodeAt(g);l=new h([v],{type:c})}function y(t){var e=t.split(/[:;,]/),a=e[1],r="base64"==e[2]?atob:decodeURIComponent,n=r(e.pop()),i=n.length,s=0,o=new Uint8Array(i);for(s;s<i;++s)o[s]=n.charCodeAt(s);return new h([o],{type:a})}function w(t,e){if("download"in d)return d.href=t,d.setAttribute("download",p),d.className="download-js-link",d.innerHTML="downloading...",d.style.display="none",document.body.appendChild(d),setTimeout(function(){d.click(),document.body.removeChild(d),!0===e&&setTimeout(function(){s.URL.revokeObjectURL(d.href)},250)},66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(t)&&(t="data:"+t.replace(/^data:([\w\/\-\+]+)/,o)),window.open(t)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=t),!0;var a=document.createElement("iframe");document.body.appendChild(a),!e&&/^data:/.test(t)&&(t="data:"+t.replace(/^data:([\w\/\-\+]+)/,o)),a.src=t,setTimeout(function(){document.body.removeChild(a)},333)}if(n=l instanceof h?l:new h([l],{type:c}),navigator.msSaveBlob)return navigator.msSaveBlob(n,p);if(s.URL)w(s.URL.createObjectURL(n),!0);else{if("string"===typeof n||n.constructor===f)try{return w("data:"+c+";base64,"+s.btoa(n))}catch(t){return w("data:"+c+","+encodeURIComponent(n))}i=new FileReader,i.onload=function(t){w(this.result)},i.readAsDataURL(n)}return!0}})},aed3:function(t,e,a){"use strict";var r=a("088f"),n=a.n(r);n.a},c41d:function(t,e,a){"use strict";a("55dd"),a("ac6a");var r=a("af47"),n=a("c1df"),i=a.n(n),s=a("8f14"),o=a.n(s),c={data:function(){return{datasets:[],datasetScanstate:"idle",unscannableMakets:[],tblColumns:[{name:"exchange",label:"Exchange",field:"exchange",sortable:!0},{name:"currency",label:"Currency",field:"currency",sortable:!0},{name:"asset",label:"Asset",field:"asset",sortable:!0},{name:"from",label:"From",field:function(t){return i.a.utc(t.from).format("YYYY-MM-DD hh:mm")},sortable:!0},{name:"to",label:"To",field:function(t){return i.a.utc(t.to).format("YYYY-MM-DD hh:mm")},sortable:!0},{name:"duration",label:"Duration",field:function(t){return o()(t.to.diff(t.from))},sortable:!1}]}},methods:{scan:function(){var t=this;this.datasetScanstate="scanning",this.$axios.post(r["a"]+"scansets",{}).then(function(e){var a=e.data;t.datasetScanstate="scanned",t.unscannableMakets=a.errors;var r=[];a.datasets.forEach(function(t){t.ranges.forEach(function(e,a){r.push({exchange:t.exchange,currency:t.currency,asset:t.asset,from:i.a.unix(e.from).utc(),to:i.a.unix(e.to).utc(),id:t.exchange+t.asset+t.currency+a})})}),r=r.filter(function(t){if(t.to.diff(t.from,"hours")>2)return!0}),r=r.sort(function(t,e){var a=t.to.diff(t.from),r=e.to.diff(e.from);return a<r?-1:a>r?1:0}).reverse(),t.datasets=r}).catch(function(e){t.$q.notify({type:"negative",message:"Error getting scan data from API"})})}}};e["a"]=c},cc88:function(t,e,a){"use strict";var r=a("285c"),n=a.n(r);n.a},d4c0:function(t,e,a){var r=a("0d58"),n=a("2621"),i=a("52a7");t.exports=function(t){var e=r(t),a=n.f;if(a){var s,o=a(t),c=i.f,l=0;while(o.length>l)c.call(t,s=o[l++])&&e.push(s)}return e}},e969:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),a("div",{staticClass:"row gutter-xs"},[a("div",{staticClass:"col"},[a("q-field",{attrs:{label:"Strategy",orientation:"vertical",helper:"Pick a strategy","label-width":2}},[a("q-select",{attrs:{filter:"","autofocus-filter":"",options:t.strategiesForList},model:{value:t.strategy,callback:function(e){t.strategy=e},expression:"strategy"}})],1),a("div",{staticClass:"row q-mt-md gutter-xs"},[a("q-field",{staticClass:"col",attrs:{label:"Candle Size",orientation:"vertical",helper:"input a candle size"}},[a("q-input",{attrs:{type:"number"},model:{value:t.rawCandleSize,callback:function(e){t.rawCandleSize=e},expression:"rawCandleSize"}})],1),a("q-field",{staticClass:"col",attrs:{label:"Unit",orientation:"vertical",helper:"Candlesize unit","label-width":2}},[a("q-select",{attrs:{options:t.candleSizeUnits},model:{value:t.candleSizeUnit,callback:function(e){t.candleSizeUnit=e},expression:"candleSizeUnit"}})],1)],1),a("q-field",{attrs:{label:"Warmup period (in "+t.rawCandleSize+" "+t.singularCandleSizeUnit+" candles):",orientation:"vertical",helper:"(will use "+t.warmupHumanized+" of data as history)"}},[a("q-input",{attrs:{type:"number"},model:{value:t.historySize,callback:function(e){t.historySize=e},expression:"historySize"}})],1)],1),a("div",{staticClass:"col"},[a("q-field",{attrs:{label:t.strategy+" Parameters:",orientation:"vertical",error:!!t.rawStratParamsError,"error-label":t.rawStratParamsError.message,helper:"Adjust parameters here"}},[a("q-input",{attrs:{type:"textarea",rows:"10","max-height":100,inverted:!!t.rawStratParamsError},model:{value:t.rawStratParams,callback:function(e){t.rawStratParams=e},expression:"rawStratParams"}})],1)],1)])])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row gutter-xs"},[a("div",{staticClass:"col"},[a("h4",[t._v("Strategy")])]),a("div",{staticClass:"col"},[a("h4",[t._v("Parameters")])])])}];r._withStripped=!0;a("7514");var i=a("2ef0"),s=a.n(i),o=a("8f14"),c=a.n(o),l=(a("7f7f"),a("af47")),u={data:function(){return{strategies:[]}},computed:{strategiesForList:function(){return s.a.map(this.strategies,function(t){return{value:t.name,label:t.name}})}},methods:{getStrategies:function(){var t=this;this.$axios.get(l["a"]+"strategies").then(function(e){t.strategies=e.data,s.a.each(t.strategies,function(t){t.empty=""===t.params}),t.rawStratParams=s.a.find(t.strategies,{name:t.strategy}).params,t.emptyStrat=s.a.find(t.strategies,{name:t.strategy}).empty,t.emitConfig()}).catch(function(e){t.$q.notify({type:"negative",message:"Error getting strategies from server."})})}}},d={mixins:[u],data:function(){return{candleSizeUnits:[{label:"minutes",value:"minutes"},{label:"hours",value:"hours"},{label:"days",value:"days"}],candleSizeUnit:"hours",rawCandleSize:1,strategy:"MACD",historySize:10,rawStratParams:"",rawStratParamsError:!1,emptyStrat:!1,stratParams:{}}},created:function(){this.getStrategies()},watch:{strategy:function(t){t=s.a.find(this.strategies,{name:t}),this.rawStratParams=t.params,this.emptyStrat=t.empty,this.emitConfig()},candleSize:function(){this.emitConfig()},historySize:function(){this.emitConfig()},rawStratParams:function(){this.emitConfig()}},computed:{warmupHumanized:function(){return c()(this.candleSize*this.historySize*1e3*60)},candleSize:function(){return"minutes"===this.candleSizeUnit?this.rawCandleSize:"hours"===this.candleSizeUnit?60*this.rawCandleSize:"days"===this.candleSizeUnit?60*this.rawCandleSize*24:void 0},singularCandleSizeUnit:function(){return this.candleSizeUnit.slice(0,-1)},config:function(){var t={tradingAdvisor:{enabled:!0,method:this.strategy,candleSize:+this.candleSize,historySize:+this.historySize}};return this.emptyStrat?t[this.strategy]={__empty:!0}:t[this.strategy]=this.stratParams,t}},methods:{emitConfig:function(){this.parseParams(),this.$emit("stratConfig",this.config)},parseParams:function(){try{this.stratParams=toml.parse(this.rawStratParams),this.rawStratParamsError=!1}catch(t){this.rawStratParamsError=t,this.stratParams={}}}}},f=d,h=a("2877"),p=Object(h["a"])(f,r,n,!1,null,null,null);p.options.__file="stratpicker.vue";e["a"]=p.exports},eb64:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{attrs:{padding:""}},[a("backtester")],1)},n=[];r._withStripped=!0;var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h3",{staticClass:"q-mb-xs"},[t._v("Backtest")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("config-builder",{on:{config:t.check}})],1)]),t.backtestable?a("div",{staticClass:"row justify-center q-mt-md"},[a("q-btn",{attrs:{color:"primary",loading:"fetching"===t.backtestState,disabled:"fetching"===t.backtestState},on:{click:function(e){return e.preventDefault(),t.run(e)}}},[t._v("Backtest")])],1):t._e(),t.backtestable?a("div",{staticClass:"row justify-center q-mt-md"},["fetching"===t.backtestState?a("div",{staticClass:"text-center"},[a("h4",[t._v("Running backtest...")]),a("q-spinner-bars",{attrs:{color:"secondary",size:"48px"}})],1):t._e()]):t._e(),t.backtestResult&&"fetched"===t.backtestState?a("result",{attrs:{result:t.backtestResult}}):t._e()],1)},s=[];i._withStripped=!0;var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("dataset-picker",{on:{dataset:t.updateDataset}}),a("strat-picker",{on:{stratConfig:t.updateStrat}}),a("paper-trader",{on:{settings:t.updatePaperTrader}})],1)},c=[];o._withStripped=!0;a("f751");var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h4",[t._v("Select a dataset "+t._s(t.selectedText))]),"idle"===t.datasetScanstate?a("div",{staticClass:"text-center"},[a("q-btn",{attrs:{color:"primary"},on:{click:function(e){return e.preventDefault(),t.scan(e)}}},[t._v("Scan available data")])],1):t._e(),a("div",{staticClass:"text-center"},["scanning"===t.datasetScanstate?a("q-spinner-bars",{attrs:{color:"secondary",size:"48px"}}):t._e()],1),"scanned"===t.datasetScanstate?a("div",[t.datasets.length?a("q-table",{attrs:{title:"Local Datasets","row-key":"id",data:t.datasets,columns:t.tblColumns,dense:"",filter:t.dsFilter,selection:"single",selected:t.selectedRows,separator:"vertical"},on:{"update:selected":function(e){t.selectedRows=e}},scopedSlots:t._u([{key:"top-right",fn:function(e){return[a("q-search",{staticClass:"col-6",attrs:{"hide-underline":"",color:"secondary"},model:{value:t.dsFilter,callback:function(e){t.dsFilter=e},expression:"dsFilter"}})]}}])}):t._e(),t.datasets.length?a("div",{staticClass:"text-center q-pa-sm"},[a("q-btn",{staticClass:"q-ma-xs",attrs:{color:"primary",icon:"av timer",disabled:!this.selectedRow||0===this.selectedRow.length},on:{click:function(e){return e.preventDefault(),t.openRange(e)}}},[t._v("Adjust range")]),a("q-btn",{staticClass:"q-ma-xs",attrs:{color:"amber",icon:"refresh"},on:{click:function(e){return e.preventDefault(),t.scan(e)}}},[t._v("reload datasets")])],1):t._e(),t.rangeVisible?a("div",{staticClass:"row"},[a("p",{staticClass:"caption"},[t._v("Adjust the dataset range to your liking")])]):t._e(),t.rangeVisible?a("div",{staticClass:"row gutter-md"},[a("div",{staticClass:"col-6"},[a("q-field",{staticClass:"col-6",attrs:{label:"From:","label-width":1,orientation:"vertical"}},[a("q-datetime",{attrs:{min:t.minSelectableRange,max:t.maxSelectableRange,type:"datetime","format-model":"auto"},model:{value:t.customFrom,callback:function(e){t.customFrom=e},expression:"customFrom"}})],1)],1),a("div",{staticClass:"col-6"},[a("q-field",{attrs:{label:"To:","label-width":1,orientation:"vertical"}},[a("q-datetime",{attrs:{min:t.minSelectableRange,max:t.maxSelectableRange,type:"datetime"},model:{value:t.customTo,callback:function(e){t.customTo=e},expression:"customTo"}})],1)],1)]):t._e(),t.datasets.length?t._e():a("div",[a("em",[t._v("No Data found "),a("router-link",{attrs:{to:"data/importer"}},[t._v("Lets add some")])],1)])],1):t._e()])},u=[];l._withStripped=!0;var d=a("c1df"),f=a.n(d),h=a("2b0e"),p=a("c41d"),m={data:function(){return{customTo:!1,customFrom:!1,rangeVisible:!1,selectedRows:[],selectedRow:null,minSelectableRange:null,maxSelectableRange:null,dsFilter:""}},mixins:[p["a"]],computed:{isScanning:function(){return"scanning"===this.datasetScanstate},selectedText:function(){return this.selectedRow?"(current: ".concat(this.selectedRow.currency," - ").concat(this.selectedRow.asset,")"):""}},mounted:function(){this.scan()},methods:{fmt:function(t){return f()(t).utc().format("YYYY-MM-DD HH:mm")},openRange:function(){this.updateCustomRange(),this.rangeVisible=!0},updateCustomRange:function(){this.customTo=this.fmt(this.selectedRow.to),this.customFrom=this.fmt(this.selectedRow.from)},emitSet:function(t){var e;t&&(this.customTo?(e=h["a"].util.extend({},t),e.to=f.a.utc(this.customTo,"YYYY-MM-DD HH:mm").format(),e.from=f.a.utc(this.customFrom,"YYYY-MM-DD HH:mm").format()):e=t,this.$emit("dataset",e))}},watch:{selectedRows:function(t){t&&t.length&&(this.selectedRow=h["a"].util.extend({},this.selectedRows[0]),this.selectedRow.from=this.selectedRow.from.toDate(),this.selectedRow.to=this.selectedRow.to.toDate(),this.minSelectableRange=this.selectedRow.from,this.maxSelectableRange=this.selectedRow.to,this.updateCustomRange(),this.emitSet(this.selectedRow[0]))},customTo:function(){this.emitSet(this.selectedRow)},customFrom:function(){this.emitSet(this.selectedRow)}}},g=m,v=a("2877"),b=Object(v["a"])(g,l,u,!1,null,null,null);b.options.__file="datasetpicker.vue";var y=b.exports,w=a("e969"),x=a("ae5a"),k=a("2ef0"),S=a.n(k),C={created:function(){var t=this;this.$axios.get(this.$store.state.config.apiBaseUrl+"configPart/performanceAnalyzer").then(function(e){t.performanceAnalyzer=toml.parse(e.data.part),t.performanceAnalyzer.enabled=!0}).catch(function(e){t.$q.notify({type:"negative",message:"Error getting Perfomance-Analyser config from server."})})},data:function(){return{dataset:{},strat:{},paperTrader:{},performanceAnalyzer:{}}},components:{stratPicker:w["a"],datasetPicker:y,paperTrader:x["a"]},computed:{market:function(){return this.dataset.exchange?{exchange:this.dataset.exchange,currency:this.dataset.currency.toUpperCase(),asset:this.dataset.asset.toUpperCase()}:{}},range:function(){return this.dataset.exchange?{from:this.dataset.from,to:this.dataset.to}:{}},config:function(){var t={};return Object.assign(t,{watch:this.market},{paperTrader:this.paperTrader},this.strat,{backtest:{daterange:this.range},backtestResultExporter:{enabled:!0,writeToDisk:!1,data:{stratUpdates:!0,roundtrips:!0,stratCandles:!0,stratCandleProps:["open","close","high","low","vwp","volume"],trades:!0}}},{performanceAnalyzer:this.performanceAnalyzer}),t.valid=this.validConfig(t),t.backtestResultExporter.enabled=!0,t}},methods:{validConfig:function(t){if(!t.backtest)return!1;if(!t.backtest.daterange)return!1;if(S.a.isEmpty(t.backtest.daterange))return!1;if(!t.watch)return!1;if(!t.tradingAdvisor)return!1;var e=t.tradingAdvisor.method;if(S.a.isEmpty(t[e]))return!1;if(t.tradingAdvisor){if(S.a.isNaN(t.tradingAdvisor.candleSize))return!1;if(0===t.tradingAdvisor.candleSize)return!1}return!0},updateDataset:function(t){this.dataset=t,this.$emit("config",this.config)},updateStrat:function(t){this.strat=t,this.$emit("config",this.config)},updatePaperTrader:function(t){this.paperTrader=t,this.paperTrader.enabled=!0,this.$emit("config",this.config)}}},P=C,T=(a("cc88"),Object(v["a"])(P,o,c,!1,null,null,null));T.options.__file="backtestConfigBuilder.vue";var E=T.exports,R=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),a("div",[t.result&&t.result.performanceReport?a("result-summary",{attrs:{report:t.result.performanceReport}}):t._e()],1),a("div",[a("echart",{attrs:{candles:t.candles,trades:t.trades,indicators:t.indicators}})],1),a("div",{staticClass:"row justify-center"},[a("excel-json",{staticClass:"column q-pa-sm",attrs:{data:t.genExportable(),name:"Backtest-Result.csv",type:"csv"}},[a("q-btn",{attrs:{icon:"file download",label:"backtest CSV",color:"amber"}})],1),a("excel-json",{staticClass:"column q-pa-sm",attrs:{data:t.genExportable(),name:"Backtest-Result.xls",type:"xls"}},[a("q-btn",{attrs:{icon:"file download",label:"backtest XLS",color:"amber"}})],1),t.result.roundtrips&&t.result.roundtrips.length?a("excel-json",{staticClass:"column q-pa-sm",attrs:{data:t.result.roundtrips,name:"Backtest-Roundtrips.xls",type:"xls"}},[a("q-btn",{attrs:{icon:"file download",label:"roundtrips XLS",color:"teal"}})],1):t._e(),t.result.roundtrips&&t.result.roundtrips.length?a("excel-json",{staticClass:"column q-pa-sm",attrs:{data:t.result.roundtrips,name:"Backtest-Roundtrips.csv",type:"csv"}},[a("q-btn",{attrs:{icon:"file download",label:"roundtrips csv",color:"teal"}})],1):t._e()],1),a("div",[t.result&&t.result.performanceReport?a("roundtrip-table",{attrs:{roundtrips:t.result.roundtrips,asset:t.result.performanceReport.asset,currency:t.result.performanceReport.currency}}):t._e()],1)])},q=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h4",[t._v("Backtest result")])])}];R._withStripped=!0;a("7514");var $=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-6"},[a("dl",{staticClass:"horizontal"},[a("dt",[t._v("Start time")]),a("dd",[t._v(t._s(t.report.startTime))]),a("dt",[t._v("End time")]),a("dd",[t._v(t._s(t.report.endTime))]),a("dt",[t._v("Timespan")]),a("dd",[t._v(t._s(t.report.timespan))]),a("dt",[t._v("Start price")]),a("dd",[t._v(t._s(t.report.startPrice)+" "+t._s(t.report.currency))]),a("dt",[t._v("End price")]),a("dd",[t._v(t._s(t.report.endPrice)+" "+t._s(t.report.currency))]),a("dt",[t._v("Market")]),a("dd",{staticClass:"text-weight-medium",class:{"text-negative":t.report.market<0,"text-positive":t.report.market>0}},[t._v(t._s(t.report.market.toFixed(6))+" %")])])]),a("div",{staticClass:"col-6"},[a("paper-trade-summary",{attrs:{report:t.report}})],1)])])},z=[];$._withStripped=!0;var j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("dl",{staticClass:"horizontal"},[a("dt",[t._v("Amount of trades")]),a("dd",[t._v(t._s(t.report.trades))]),a("dt",[t._v("Sharpe ratio")]),a("dd",[t._v(t._s(t.round2(t.report.sharpe)))]),a("dt",[t._v("Start Balance")]),a("dd",[t._v(t._s(t.round(t.report.startBalance))+" "+t._s(t.report.currency))]),a("dt",[t._v("End Balance")]),a("dd",[t._v(t._s(t.round(t.report.balance))+" "+t._s(t.report.currency))]),a("dt",[t._v("Simulated profit")]),a("dd",{staticClass:"q-title",class:t.profitClass},[t._v(t._s(t.round(t.report.relativeProfit))+" %")])])},D=[];j._withStripped=!0;var A={props:["report"],methods:{round2:function(t){return(+t).toFixed(2)},round:function(t){return(+t).toFixed(5)}},computed:{profitClass:function(){return this.report.relativeProfit>0?"text-positive":"text-negative"}}},O=A,F=Object(v["a"])(O,j,D,!1,null,null,null);F.options.__file="paperTradeSummary.vue";var U=F.exports,W={props:["report"],components:{paperTradeSummary:U},methods:{round:function(t){return(+t).toFixed(5)}}},B=W,M=Object(v["a"])(B,$,z,!1,null,null,null);M.options.__file="summary.vue";var Y=M.exports,N=a("bdfd"),V=a("1a90"),L=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:t.idName},on:{click:t.generate}},[t._t("default",[t._v("\n\t\tDownload "+t._s(t.name)+"\n\t")])],2)},G=[];L._withStripped=!0;a("6aa2"),a("ac4d"),a("8a81"),a("28a5");var H=a("7037"),I=a.n(H),J=(a("4917"),a("ac6a"),a("cadf"),a("456d"),a("7f7f"),a("a481"),a("96cf"),a("c973")),K=a.n(J),X=a("aeb1"),Q=a.n(X),Z={props:{type:{type:String,default:"xls"},data:{type:Array,required:!1,default:null},fields:{type:Object,required:!1},exportFields:{type:Object,required:!1},defaultValue:{type:String,required:!1,default:""},title:{default:null},footer:{default:null},name:{type:String,default:"data.xls"},fetch:{type:Function},meta:{type:Array,default:function(){return[]}}},computed:{idName:function(){var t=(new Date).getTime();return"export_"+t},downloadFields:function(){return void 0!==this.fields?this.fields:void 0!==this.exportFields?this.exportFields:void 0}},methods:{generate:function(){var t=K()(regeneratorRuntime.mark(function t(){var e,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.data,"function"!==typeof this.fetch&&e){t.next=5;break}return t.next=4,this.fetch();case 4:e=t.sent;case 5:if(e&&e.length){t.next=7;break}return t.abrupt("return");case 7:if(a=this.getProcessedJson(e,this.downloadFields),"html"!==this.type){t.next=12;break}return t.abrupt("return",this.export(this.jsonToXLS(a),this.name.replace(".xls",".html"),"text/html"));case 12:if("csv"!==this.type){t.next=14;break}return t.abrupt("return",this.export(this.jsonToCSV(a),this.name.replace(".xls",".csv"),"application/csv"));case 14:return t.abrupt("return",this.export(this.jsonToXLS(a),this.name,"application/vnd.ms-excel"));case 15:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),export:function(t,e,a){var r=this.base64ToBlob(t,a);Q()(r,e,a)},jsonToXLS:function(t){var e='<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head><meta name=ProgId content=Excel.Sheet> <meta name=Generator content="Microsoft Excel 11"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">\x3c!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--\x3e</head><body><table>${table}</table></body></html>',a="<thead>",r=Object.keys(t[0]).length;for(var n in null!=this.title&&(a+=this.parseExtraData(this.title,'<tr><th colspan="'+r+'">${data}</th></tr>')),a+="<tr>",t[0])a+="<th>"+n+"</th>";return a+="</tr>",a+="</thead>",a+="<tbody>",t.map(function(t,e){for(var r in a+="<tr>",t)a+="<td>"+t[r]+"</td>";a+="</tr>"}),a+="</tbody>",null!=this.footer&&(a+="<tfoot>",a+=this.parseExtraData(this.footer,'<tr><td colspan="'+r+'">${data}</td></tr>'),a+="</tfoot>"),e.replace("${table}",a)},jsonToCSV:function(t){var e=[];for(var a in null!=this.title&&e.push(this.parseExtraData(this.title,"${data}\r\n")),t[0])e.push(a),e.push(",");return e.pop(),e.push("\r\n"),t.map(function(t){for(var a in t){var r=t[a]+"";r.match(/[,"\n]/)&&(r='"'+r.replace(/\"/g,'""')+'"'),e.push(r),e.push(",")}e.pop(),e.push("\r\n")}),null!=this.footer&&e.push(this.parseExtraData(this.footer,"${data}\r\n")),e.join("")},getProcessedJson:function(t,e){var a=this.getKeys(t,e),r=[],n=this;return t.map(function(t,e){var i={};for(var s in a){var o=a[s];i[s]=n.getValue(o,t)}r.push(i)}),r},getKeys:function(t,e){if(e)return e;var a={};for(var r in t[0])a[r]=r;return a},parseExtraData:function(t,e){var a="";if(Array.isArray(t))for(var r=0;r<t.length;r++)a+=e.replace("${data}",t[r]);else a+=e.replace("${data}",t);return a},getValue:function(t,e){var a="object"!==I()(t)?t:t.field,r="string"!==typeof a?[]:a.split("."),n=this.defaultValue;return n=a?r.length>1?this.getValueFromNestedItem(e,r):this.parseValue(e[a]):e,t.hasOwnProperty("callback")&&(n=this.getValueFromCallback(n,t.callback)),n},getValueFromNestedItem:function(t,e){var a=t,r=!0,n=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var c=s.value;a&&(a=a[c])}}catch(t){n=!0,i=t}finally{try{r||null==o.return||o.return()}finally{if(n)throw i}}return this.parseValue(a)},getValueFromCallback:function(t,e){if("function"!==typeof e)return this.defaultValue;var a=e(t);return this.parseValue(a)},parseValue:function(t){return t||0===t?t:this.defaultValue},base64ToBlob:function(t,e){var a=window.btoa(window.unescape(encodeURIComponent(t))),r=atob(a),n=r.length,i=new Uint8ClampedArray(n);while(n--)i[n]=r.charCodeAt(n);return new Blob([i],{type:e})}}},tt=Z,et=Object(v["a"])(tt,L,G,!1,null,null,null);et.options.__file="JsonExcel.vue";var at=et.exports,rt={props:["result"],data:function(){return{}},computed:{candles:function(){return this.result.stratCandles||[]},trades:function(){return this.result.trades||[]},indicators:function(){return this.result.stratUpdates||[]}},methods:{genExportable:function(){if(this.candles&&this.candles.length&&this.trades&&this.trades.length){var t=S.a.cloneDeep(this.candles);return S.a.each(this.trades,function(e){var a=S.a.indexOf(t,S.a.find(t,function(t){return t.start===e.date}));a>=0&&S.a.set(t[a],"advice",e.action)}),S.a.each(t,function(t){t.advice||S.a.set(t,"advice","")}),t}return[]}},components:{roundtripTable:N["a"],resultSummary:Y,echart:V["a"],ExcelJson:at}},nt=rt,it=Object(v["a"])(nt,R,q,!1,null,null,null);it.options.__file="result.vue";var st=it.exports,ot=a("469d"),ct={mixins:[ot["a"]],data:function(){return{backtestable:!1,backtestState:"idle",config:!1,candleWriter:null}},created:function(){var t=this;this.$axios.get(this.$store.state.config.apiBaseUrl+"configPart/candleWriter").then(function(e){t.candleWriter=toml.parse(e.data.part)}).catch(function(t){console.log("error getting candlewriter-config",t)})},computed:{backtestResult:function(){return this.$store.getters["backtest/result"]}},methods:{check:function(t){if(this.config=t,!t.valid)return this.backtestable=!1;this.backtestable=!0},run:function(){var t=this;this.backtestState="fetching";this.$axios.post(this.$store.state.config.apiBaseUrl+"backtest",this.config).then(function(e){t.backtestState="fetched",t.$store.dispatch("backtest/setBacktestResult",e.data)}).catch(function(e){console.error(e),t.$q.notify({type:"negative",message:"Error during backtest-fetching of data."}),t.backtestState="error"})},startLiveGekko:function(t){var e=this;this.candleWriter&&(this.config["candleWriter"]=this.candleWriter,this.config["watch"]["candleWriter"]=this.candleWriter),this.config.type=t?"paper trader":"tradebot",t||_.set(this.config,"paperTrader.enabled",!1),this.$q.dialog({title:"Start live "+this.config.type+"?",message:"Do you really want to start a live "+this.config.type+" for "+this.config.watch.currency+"-"+this.config.watch.asset+" on "+this.config.watch.exchange+" with the current backtest settings?",ok:"Yes",cancel:"No"}).then(function(){t||_.set(e.config,"trader.enabled",!0),e.start()})}},components:{configBuilder:E,result:st}},lt=ct,ut=Object(v["a"])(lt,i,s,!1,null,null,null);ut.options.__file="backtester.vue";var dt=ut.exports,ft={name:"BacktesterPage",components:{Backtester:dt}},ht=ft,pt=(a("aed3"),Object(v["a"])(ht,r,n,!1,null,null,null));pt.options.__file="backtest.vue";e["default"]=pt.exports}}]);