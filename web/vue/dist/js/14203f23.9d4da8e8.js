(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["14203f23"],{"8e5a":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{attrs:{padding:""}},[a("div",{staticClass:"q-headline"},[t._v("Import data")]),a("div",{staticClass:"subheading"},[t._v("The importer can download historical market data directly from the exchange.")]),a("div",{staticClass:"row justify-center q-pa-md"},[a("q-btn",{attrs:{color:"amber",label:"Start Import"},on:{click:function(e){return e.preventDefault(),t.run(e)}}})],1),a("div",[a("q-tabs",{attrs:{align:"justify",color:"blue-grey-5 text-white full-width"},model:{value:t.currentTab,callback:function(e){t.currentTab=e},expression:"currentTab"}},[a("q-tab",{attrs:{slot:"title",icon:"av timer",name:"running-imports",label:"Running imports"},slot:"title"}),a("q-tab",{attrs:{slot:"title",icon:"add",name:"start-new",label:"Start new import"},slot:"title"}),a("q-tab-pane",{attrs:{name:"running-imports"}},[a("div",{staticClass:"row justify-center"},[0===t.imports.length?a("q-alert",{attrs:{type:"warning",icon:"warning"}},[t._v("\n          You currently don't have any imports running.\n        ")]):t._e(),t._l(t.imports,function(e){return a("q-card",{key:e.id,staticClass:"col-3 text-center q-mr-md q-mt-sm"},[a("q-card-title",{staticClass:"bg-teal-2"},[t._v("\n              "+t._s(e.watch.exchange)+"\n              "),a("span",{attrs:{slot:"subtitle"},slot:"subtitle"},[t._v("\n              "+t._s(e.watch.currency)+"-"+t._s(e.watch.asset)+"\n            ")])]),a("q-card-separator"),a("q-card-main",[a("q-knob",{class:{"text-teal":!e.done,"text-positive":e.done},attrs:{min:0,max:100,value:+t.progress(e)}},[e.done?a("q-icon",{attrs:{size:"64px",color:"positive",name:"done"}}):t._e(),e.done?t._e():a("span",{staticClass:"q-title"},[t._v(t._s(+t.progress(e))+" %")])],1)],1),a("q-card-separator"),a("q-card-actions",{attrs:{align:"center"}},[a("q-btn",{attrs:{color:"teal",flat:""},on:{click:function(a){t.$router.push("/data/importer/import/"+e.id)}}},[t._v("open import")])],1)],1)})],2)]),a("q-tab-pane",{attrs:{name:"start-new"}},[a("import-config-builder",{on:{config:t.updateConfig}})],1)],1)],1)])},i=[];n._withStripped=!0;var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row justify-around items-top"},[a("market-picker",{staticClass:"col-3",attrs:{"only-importable":!0},on:{market:t.updateMarketConfig}}),a("range-creator",{staticClass:"col-3",on:{range:t.updateRange}})],1)},s=[];r._withStripped=!0;a("f751");var o=a("e81c"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-card",{staticClass:"q-ma-sm"},[a("q-card-title",{staticClass:"bg-amber-8 text-white"},[t._v("Daterange")]),a("q-card-separator"),a("q-card-main",[a("q-field",{attrs:{label:"From",helper:"Pick a start date and time","label-width":3}},[a("q-datetime",{staticClass:"no-margin",attrs:{type:"datetime"},model:{value:t.from,callback:function(e){t.from=e},expression:"from"}})],1)],1),a("q-card-separator"),a("q-card-main",[a("q-field",{attrs:{label:"To",helper:"Pick an end date and time","label-width":3}},[a("q-datetime",{staticClass:"no-margin",attrs:{type:"datetime"},model:{value:t.to,callback:function(e){t.to=e},expression:"to"}})],1)],1)],1)},l=[];c._withStripped=!0;var u=a("c1df"),h=a.n(u),f={data:function(){return{from:"",to:""}},created:function(){var t=h()().startOf("minute"),e=t.clone().subtract(3,"months");this.to=this.fmt(t),this.from=this.fmt(e),this.emitRange()},methods:{fmtTs:function(t){return h.a.unix(t).utc()},fmt:function(t){return t.utc().format("YYYY-MM-DD HH:mm")},emitRange:function(){this.$emit("range",{from:this.fmtTs(this.from),to:this.fmtTs(this.to)})},emitManualEntry:function(){if(this.from.length<"4"||this.from.length<"4")return this.$emit("range",{});var t=h.a.utc(this.from),e=h.a.utc(this.to);t.isValid()&&e.isValid()?this.$emit("range",{from:this.fmt(t),to:this.fmt(e)}):this.$emit("range",{})}},watch:{from:function(){this.emitManualEntry()},to:function(){this.emitManualEntry()},config:function(){this.scanned=!1},tab:function(){this.scanned=!1,this.$emit("range",{})},selectedRangeIndex:function(){var t=this.ranges[this.selectedRangeIndex];t&&this.emitRange(t)}}},m=f,d=a("2877"),g=Object(d["a"])(m,c,l,!1,null,null,null);g.options.__file="rangecreator.vue";var p=g.exports,b={data:function(){return{market:{},range:{}}},components:{marketPicker:o["a"],rangeCreator:p},computed:{config:function(){var t={};return Object.assign(t,this.market,{importer:{daterange:this.range}},{candleWriter:{enabled:!0}}),t}},methods:{updateMarketConfig:function(t){this.market=t,this.emitConfig()},updateRange:function(t){this.range=t,this.emitConfig()},emitConfig:function(){this.$emit("config",this.config)}}},x=b,v=Object(d["a"])(x,r,s,!1,null,null,null);v.options.__file="importConfigBuilder.vue";var y=v.exports,q=a("af47"),_={methods:{startImport:function(t){return this.$axios.post(q["a"]+"import",t)}}},w=_,k={mixins:[w],components:{importConfigBuilder:y},data:function(){return{config:{},currentTab:"running-imports"}},mounted:function(){this.imports.length||(this.currentTab="start-new")},computed:{imports:function(){return this.$store.state.imports.imports}},methods:{progress:function(t){if(t){if(t.done)return 100;var e=h.a.utc(t.to).diff(h.a.utc(t.from))-h.a.utc(t.to).diff(h.a.utc(t.latest)),a=100*e;return a/=h.a.utc(t.to).diff(h.a.utc(t.from)),!!a&&+a.toFixed(2)}},daysApart:function(t){var e=h()(t.to),a=h()(t.from);return e.diff(a,"days")},updateConfig:function(t){this.config=t},run:function(){var t=this,e=this.daysApart(this.config.importer.daterange);if(e<1)this.$q.dialog({title:"Error",message:"You can only import at least one day of data."});else{var a=this.$store.state.config.exchanges[this.config.watch.exchange];"exchangeMaxHistoryAge"in a&&h()(this.config.importer.daterange.from)<h()().subtract(a.exchangeMaxHistoryAge,"days")?this.$q.dialog({title:"Error",message:"Your date from is too old for "+this.config.watch.exchange+". It supports only the last "+a.exchangeMaxHistoryAge+" days.."}):this.startImport(this.config).then(function(e){t.$store.dispatch("imports/addImport",e.data),t.$router.push({path:"/data/importer/import/".concat(e.data.id)})}).catch(function(e){console.error(e),t.$q.notify({message:"An error occured while trying to start the import!",type:"negative"})})}}}},C=k,$=(a("bad8"),Object(d["a"])(C,n,i,!1,null,null,null));$.options.__file="importer.vue";e["default"]=$.exports},bad8:function(t,e,a){"use strict";var n=a("ffd1"),i=a.n(n);i.a},be78:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-field",{attrs:{label:"Exchange",helper:"Pick an exchange","label-width":3}},[a("q-select",{attrs:{filter:"","autofocus-filter":"",options:t.exchangeList},model:{value:t.exchange,callback:function(e){t.exchange=e},expression:"exchange"}})],1)},i=[];n._withStripped=!0;a("7f7f"),a("f751"),a("ac6a"),a("cadf"),a("456d");var r=a("2ef0"),s=a.n(r),o={props:["onlyTradable","onlyImportable"],data:function(){return{exchange:"binance"}},created:function(){this.emitExchange()},computed:{exchangeList:function(){return s.a.map(Object.keys(this.exchanges),function(t,e){return{value:t,label:t}})},exchanges:function(){var t=Object.assign({},this.$store.state.config.exchanges);return!s.a.isEmpty(t)&&(this.onlyTradable&&s.a.each(t,function(e,a){e.tradable||delete t[a]}),this.onlyImportable&&s.a.each(t,function(e,a){e.importable||delete t[a]}),t)}},watch:{exchanges:function(){this.emitExchange()},exchange:function(){this.emitExchange()}},methods:{emitExchange:function(){this.$emit("exchange",this.exchange)}}},c=o,l=a("2877"),u=Object(l["a"])(c,n,i,!1,null,null,null);u.options.__file="exchangepicker.vue";e["a"]=u.exports},e81c:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-card",{staticClass:"q-mr-md"},[a("q-card-title",{staticClass:"bg-amber-8 text-white"},[t._v("Market")]),a("q-card-separator"),a("q-card-main",[a("exchange-picker",{attrs:{onlyTradable:t.onlyTradable,onlyImportable:t.onlyImportable},on:{exchange:function(e){t.setExchange(e)}}})],1),a("q-card-separator"),a("q-card-main",[t.currencies?a("q-field",{attrs:{label:"Currency",helper:"Pick a currency","label-width":3}},[a("q-select",{attrs:{filter:"","autofocus-filter":"",options:t.currencies,radio:""},model:{value:t.currency,callback:function(e){t.currency=e},expression:"currency"}})],1):t._e()],1),a("q-card-separator"),a("q-card-main",[t.currencies?a("q-field",{attrs:{label:"Asset",helper:"Pick an asset","label-width":3}},[a("q-select",{attrs:{filter:"","autofocus-filter":"",options:t.assets,radio:""},model:{value:t.asset,callback:function(e){t.asset=e},expression:"asset"}})],1):t._e()],1)],1)},i=[];n._withStripped=!0;a("ac6a"),a("cadf"),a("7f7f"),a("f751");var r=a("2ef0"),s=a.n(r),o=a("be78"),c={props:["onlyTradable","onlyImportable"],components:{exchangePicker:o["a"]},data:function(){return{exchange:"binance",currency:"BTC",asset:"NEO"}},created:function(){this.emitConfig()},computed:{exchanges:function(){var t=Object.assign({},this.$store.state.config.exchanges);return!s.a.isEmpty(t)&&(this.onlyTradable&&s.a.each(t,function(e,a){e.tradable||delete t[a]}),this.onlyImportable&&s.a.each(t,function(e,a){e.importable||delete t[a]}),t)},markets:function(){return this.exchanges?this.exchanges[this.exchange]:null},assets:function(){var t=this.exchanges?this.exchanges[this.exchange].markets[this.currency]:[];return t&&(t=s.a.orderBy(s.a.map(t,function(t){return{value:t,label:t}}),["label"],["asc"]),t.length&&(this.asset=t[0].value)),t},currencies:function(){var t=this.exchanges?s.a.keys(this.exchanges[this.exchange].markets):[];return t&&(t=s.a.orderBy(s.a.map(t,function(t){return{value:t,label:t}}),["label"],["asc"]),t.length&&(this.currency=t[0].value)),t},watchConfig:function(){return{watch:{exchange:this.exchange,currency:this.currency,asset:this.asset}}}},watch:{currency:function(){this.emitConfig()},asset:function(){this.emitConfig()},market:function(){this.emitConfig()},exchanges:function(){this.emitConfig()},exchange:function(){this.emitConfig()}},methods:{setExchange:function(t){this.exchange=t},emitConfig:function(){this.$emit("market",this.watchConfig)}}},l=c,u=a("2877"),h=Object(u["a"])(l,n,i,!1,null,null,null);h.options.__file="marketpicker.vue";e["a"]=h.exports},ffd1:function(t,e,a){}}]);